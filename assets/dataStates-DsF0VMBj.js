import{h as v,i as L,_ as O,a as g,o as F,s as N,l as p,b as C,k as E,m as f,j as n,I as y,n as u,t as A,p as w,u as _}from"./index-pnElvbLb.js";import{b as U,t as S,C as M,E as I}from"./translateData-BVr0GJ1P.js";function Q(t,s,a){return t==null?void 0:t.sort((e,r)=>a==="asc"?e[s]>r[s]?1:-1:r[s]>e[s]?1:-1)}function R(){const t=v(),{mutate:s,isPending:a}=L({mutationFn:e=>U(e),onSuccess:()=>{O.success("Transaction made successfully",{className:"toast"}),t.invalidateQueries({predicate:e=>{const r=e.queryKey;return["cards","transactions"].includes(r[0])}})},onError:e=>O.error(e.message,{className:"toast"})});return{isPending:a,addTransactions:s}}function D(){const{t}=g(),s=t("modal"),{enterAmount:a,enterDescription:e,enterCategory:r}=s;return{FIELD_LABEL:{AMOUNT:a,DESCRIPTION:e,CATEGORY:r},modal:s}}const i={AMOUNT:"amount",DESCRIPTION:"description",CATEGORY:"category"},P=F({[i.AMOUNT]:N().min(1,{message:"Required"}),[i.DESCRIPTION]:N().min(1,{message:"Required"}),[i.CATEGORY]:N({required_error:"Required"})}),G=["Job","Side Job","Freelancing","Other"];function k(){const t=p(),s=C(E),{isPending:a,addTransactions:e}=R(),{modal:r,FIELD_LABEL:c}=D(),l=S(G,r.categories),{register:d,handleSubmit:h,formState:{errors:T}}=f({defaultValues:{[i.AMOUNT]:"",[i.DESCRIPTION]:"",[i.CATEGORY]:""},resolver:A(P)}),b=[{name:i.AMOUNT,label:c.AMOUNT,type:"number"},{name:i.DESCRIPTION,label:c.DESCRIPTION},{name:i.CATEGORY,label:c.CATEGORY,type:"select",options:l}],x=o=>{console.log(o);const m={amount:+o.amount,description:o.description,bankAccountId:s._id,category:o.category};e(m),t(u({modalId:"deposit",open:!1}))};return n.jsxs("div",{children:[n.jsx("div",{className:"card-transactions-container",children:n.jsx(M,{})}),n.jsxs("form",{className:"form-transactions",onSubmit:h(x),children:[b.map((o,m)=>n.jsx(y,{id:o.name,name:o.name,register:d,errors:T,placeholder:o.label,type:o.type,options:o.options},m)),n.jsx("div",{className:"form-btn",children:n.jsx("button",{className:"btn btn-form",disabled:a,children:"Deposit"})})]})]})}const Y=["Utilities","Groceries","Entertainment","Travel","Miscellaneous"];function q(){const t=p(),s=C(E),{isPending:a,addTransactions:e}=R(),{FIELD_LABEL:r,modal:c}=D(),l=S(Y,c.categories),{register:d,handleSubmit:h,formState:{errors:T}}=f({defaultValues:{[i.AMOUNT]:"",[i.DESCRIPTION]:"",[i.CATEGORY]:"Utilities"},resolver:A(P)}),b=[{name:i.AMOUNT,label:r.AMOUNT,type:"number"},{name:i.DESCRIPTION,label:r.DESCRIPTION},{name:i.CATEGORY,label:r.CATEGORY,type:"select",options:l}],x=o=>{console.log(o);const m={amount:-+o.amount,description:o.description,bankAccountId:s._id,category:o.category};e(m),t(u({modalId:"withdraw",open:!1}))};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"card-transactions-container",children:n.jsx(M,{})}),n.jsxs("form",{onSubmit:h(x),children:[b.map((o,m)=>n.jsx(y,{id:o.name,name:o.name,register:d,errors:T,placeholder:o.label,type:o.type,options:o.options},m)),n.jsx("div",{className:"form-btn",children:n.jsx("button",{className:"btn btn-form",disabled:a,children:c.withdraw})})]})]})}function B({children:t,modalId:s,handleCloseModal:a}){const e=p(),r=C(d=>w(d,s));function c(){e(u({modalId:s,open:!1}))}function l(d){d.stopPropagation()}return r?n.jsx("div",{className:"overlay",onClick:c,children:n.jsxs("div",{className:"modal",onClick:l,children:[n.jsx("button",{className:"modal-button",onClick:a||c,children:"X"}),t]})}):null}function j({modalId:t,formComponent:s,buttonText:a,openModal:e}){return n.jsxs("div",{className:"card-operations-item",children:[t&&n.jsx(B,{modalId:t,children:s}),n.jsx("button",{className:"btn btn-operations",onClick:e,children:a})]})}function H(){const t=p(),{t:s}=g(),{transactionHistory:a}=s("transactions"),{deposit:e,withdraw:r}=a,c=()=>{t(u({modalId:"deposit",open:!0}))},l=()=>{t(u({modalId:"withdraw",open:!0}))};return n.jsxs("div",{className:"card-operations-container",children:[n.jsx(j,{modalId:"deposit",formComponent:n.jsx(k,{}),buttonText:e,openModal:c}),n.jsx(j,{modalId:"withdraw",formComponent:n.jsx(q,{}),buttonText:r,openModal:l})]})}function V({options:t,title:s,buttons:a}){const[e,r]=_();function c(l){console.log(l.target.value),e.set("sortBy",l.target.value),r(e)}return n.jsxs("div",{className:"transaction-table-title",children:[n.jsx("h3",{children:s}),a&&n.jsx(H,{}),n.jsx("select",{onChange:c,className:"form-input form-input-table",children:t.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function W(t,s,a){return s?n.jsx(I,{text:"Loading..."}):!s&&(t==null?void 0:t.length)===0?n.jsx(I,{text:a}):null}export{B as M,V as S,W as d,Q as s,D as u};
